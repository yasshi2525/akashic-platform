# webapp

ゲームプラットフォームとして動作するWebアプリケーション実装です。

## Requirement

- PostgreSQL データベース

## NOTE

### `agvw` - `untrusted` について

本Webアプリケーションではゲームスクリプトを `trusted` として扱います。
これは `untrusted` として動作させるために必要な環境設定 (URL構成、DOM要素、config) を特定できなかったためです。
`trusted` として扱うことのリスクは仕様が公開されていないため不明です。

### 静的ファイルについて

コンテンツ（投稿ゲームデータ）は Minio にデプロイされます。一方、
`enfineFileVx_xx_x.js`, `playlogClientVx_x_x.js` は アプリ側で配信してます。
これはファイル更新処理の扱いを決めきれていないための措置です。

> [!NOTE]
>
> ゲストとして参戦した後ログインしたとき、現状ではログイン後のアカウントでプレイに参加してしまう。これを解決するにはログイン時にゲストIDを紐づけ、ゲストIDで参加したプレイをマッピングする仕組みが必要である。まずは通常フローを完成させ、その後権限昇格処理を実装する

> [!NOTE]
>
> 操作性を考え、特にプレイに参加するとき、ゲストとして参加するかログインするかポップアップを出したりしない。

> [!NOTE]
>
> 現状、ゲーム更新時、当該プレイをすべて削除しています。

> [!NOTE]
>
> TODO
>
> - プレイ数カウント
> - ユーザー名テキスト入力
> - リンク共有
> - スクショ投稿
> - Xシェア。できればサムネイル作成
> - gameIcon を返すエンドポイント作る（ゲーム更新すると通知の画像が消える）
